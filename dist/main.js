(()=>{"use strict";const e=[],t=document.getElementsByClassName("grid-container")[0],o=document.getElementsByTagName("body")[0],l=document.createElement("div");l.className="opaque";var i=0;window.onload=()=>{0!=window.localStorage&&function(){let t=0;for(let o=0;o<window.localStorage.length;o++){const l=JSON.parse(window.localStorage.getItem("project"+(o-t)));let i=l.toDoItemList.length;const c=new n(l.title,l.description);for(let e=0;e<i;e++){const l=JSON.parse(window.localStorage.getItem("project"+(o-t)+"item"+e)),i=new r(l.priority,l.title,l.description,l.dueDate);c.toDoItemList.push(i),t++,o++}e.push(c),u(c)}}()};class n{constructor(e,t){this.title=e,this.description=t,this.toDoItemList=[]}addItem(e){this.toDoItemList.push(e)}removeItem(e){this.toDoItemList.splice(e,1)}}class r{constructor(e,t,o,l){this.priority=e,this.title=t,this.description=o,this.dueDate=l}}function c(){window.localStorage.clear();for(let t=0;t<e.length;t++){window.localStorage.setItem("project"+t,JSON.stringify(e[t]));for(let o=0;o<e[t].toDoItemList.length;o++)window.localStorage.setItem("project"+t+"item"+o,JSON.stringify(e[t].toDoItemList[o]))}}function s(t,o){e[t].toDoItemList=[],Array.from(o.querySelectorAll(".to-do-item")).forEach((o=>{let l=o.querySelectorAll("#priority")[0].textContent,i=o.querySelectorAll("#title")[0].textContent,n=o.querySelectorAll("#description")[0].textContent,c=o.querySelectorAll("#dueDate")[0].textContent;const s=new r(l,i,n,c);console.log(s.title+"- title of toDoItem loaded from modal."),e[t].addItem(s)})),console.log("Refreshed items array!"),console.log(e[t].toDoItemList),c()}function a(t){const i=document.createElement("div");i.className="project-overview-modal",i.innerHTML='<button class="close-icon"></button>\n        <h1 style="font-family: Arial, Helvetica, sans-serif;">To-Do List</h1>\n        <button id="add-todo-item"></button>',i.querySelectorAll(".close-icon")[0].addEventListener("click",(()=>{i.remove(),o.removeChild(l)})),i.querySelectorAll("#add-todo-item")[0].addEventListener("click",(()=>{const e=d();e.querySelectorAll(".check-icon")[0].addEventListener("click",(()=>{let l=e.querySelectorAll("#priority")[0].value,n=e.querySelectorAll("#toDoItemTitle")[0].value,r=e.querySelectorAll("#dueDate")[0].value,c=e.querySelectorAll("#description")[0].value;const a=p(l,n,c,r);a.querySelectorAll(".close-icon")[0].addEventListener("click",(e=>{a.remove(),s(t,i),e.stopPropagation()})),a.querySelectorAll(".edit-icon")[0].addEventListener("click",(t=>{e.querySelectorAll("#toDoItemTitle")[0].value=n,e.querySelectorAll("#priority")[0].value=l,e.querySelectorAll("#dueDate")[0].value=r,e.querySelectorAll("#description")[0].value=c,i.replaceChild(e,a),t.stopPropagation()}));const d=a.querySelectorAll(".item-description")[0];a.addEventListener("click",(()=>{d.classList.contains("hidden")?d.classList.remove("hidden"):d.classList.add("hidden")})),i.insertBefore(a,e),o.click(),s(t,i)}));const o=e.querySelectorAll(".close-icon")[0];o.addEventListener("click",(()=>{e.remove()})),i.insertBefore(e,i.lastChild)})),function(t,o){const l=o.querySelectorAll(".to-do-item,.to-do-item-form"),i=o.querySelectorAll("#add-todo-item")[0];l.forEach((e=>{e.remove()})),i.remove();for(let l=0;l<e[t].toDoItemList.length;l++){let i=e[t].toDoItemList[l].priority,n=e[t].toDoItemList[l].title,r=e[t].toDoItemList[l].description,c=e[t].toDoItemList[l].dueDate;const a=p(i,n,r,c);a.querySelectorAll(".close-icon")[0].addEventListener("click",(e=>{a.remove(),s(t,o),e.stopPropagation()})),a.querySelectorAll(".edit-icon")[0].addEventListener("click",(e=>{const l=d();l.querySelectorAll("#toDoItemTitle")[0].value=n,l.querySelectorAll("#priority")[0].value=i,l.querySelectorAll("#dueDate")[0].value=c,l.querySelectorAll("#description")[0].value=r,l.querySelectorAll(".check-icon")[0].addEventListener("click",(()=>{let e=l.querySelectorAll("#priority")[0].value,i=l.querySelectorAll("#toDoItemTitle")[0].value,n=l.querySelectorAll("#dueDate")[0].value,r=l.querySelectorAll("#description")[0].value;const c=p(e,i,r,n);c.querySelectorAll(".close-icon")[0].addEventListener("click",(e=>{c.remove(),s(t,o),e.stopPropagation()})),c.querySelectorAll(".edit-icon")[0].addEventListener("click",(t=>{l.querySelectorAll("#toDoItemTitle")[0].value=i,l.querySelectorAll("#priority")[0].value=e,l.querySelectorAll("#dueDate")[0].value=n,l.querySelectorAll("#description")[0].value=r,o.replaceChild(l,c),t.stopPropagation()}));const a=c.querySelectorAll(".item-description")[0];c.addEventListener("click",(()=>{a.classList.contains("hidden")?a.classList.remove("hidden"):a.classList.add("hidden")})),o.insertBefore(c,l),u.click(),s(t,o)}));const u=l.querySelectorAll(".close-icon")[0];u.addEventListener("click",(()=>{l.remove()})),o.replaceChild(l,a),e.stopPropagation()}));const u=a.querySelectorAll(".item-description")[0];a.addEventListener("click",(()=>{u.classList.contains("hidden")?u.classList.remove("hidden"):u.classList.add("hidden")})),o.appendChild(a)}o.appendChild(i)}(t,i),o.appendChild(i),o.appendChild(l)}function d(){const e=document.createElement("div");return e.className="to-do-item-form",e.innerHTML='<button class="close-icon"></button>\n        <button class="check-icon"></button>\n        <div class="item-top-info">\n        <label for="priority" style="margin-right: 4px;">Priority Level</label>\n        <select name="priority" id="priority">\n            <option value="!">1</option>\n            <option value="!!">2</option>\n            <option value="!!!">3</option>\n        </select>\n        <input type="text" id="toDoItemTitle" name="toDoItemTitle" style="font-size:28px; width: 428px; margin-left: 12px; margin-right: 12px;" placeholder="Enter title here.">\n        <p>Due on</p>\n        <input type="date" name="dueDate" id="dueDate" style="margin-left:8px;">\n        </div>\n        <div class="item-bottom-info">\n            <textarea style="resize: none;" class="item-description" name="description" id="description" cols="30" rows="10" placeholder="Enter description here."></textarea>\n        </div>',e}function p(e,t,o,l){const i=document.createElement("div");return i.className="to-do-item",i.innerHTML='<button class="close-icon"></button>\n        <button class="edit-icon"></button>\n        <div class="item-top-info">\n            <p class="priority" id="priority">'+e+'</p>\n            <ul><li class="to-do-title" id="title">'+t+'</li></ul>\n            <p></p>\n            <p id="dueDate">'+l+'</p>\n            <svg class="hidden" style="width:24px;height:24px" viewBox="0 0 24 24">\n                <path d="M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />\n            </svg>\n        </div>\n        <div class="item-bottom-info">\n            <div class="item-description hidden">\n                <p id="description">'+o+"</p>\n            </div>\n        </div>\n    ",i}function u(o){const l=document.createElement("div");l.className="card",l.innerHTML='<button class="close-icon"></button>\n        <p class="card-title">'+o.title+'</p>\n        <p class="card-description">'+o.description+'</p>\n        <svg class="hidden" style="width:24px;height:24px" viewBox="0 0 24 24">\n        <path d="M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />\n        </svg>';const n=l.querySelectorAll(".close-icon")[0];n.addEventListener("click",(t=>{t.stopPropagation(),n.parentElement.remove(),function(t){for(let o=0;o<e.length;o++)t===e[o].title&&e.splice(o,1);c(),console.log(e),console.log("-----end of log-----")}(o.title)})),l.addEventListener("click",(()=>{for(let t=0;t<e.length;t++)l.querySelectorAll(".card-title")[0].textContent==e[t].title&&(i=t,console.log('Project "'+e[t].title+'" selected'),t=e.length,a(i))})),t.insertBefore(l,t.firstChild)}document.getElementById("add-new-project").addEventListener("click",(()=>{!function(){const t=document.createElement("div");t.className="new-project-modal";const i=document.createElement("form");i.innerHTML='<label for="projectTitle">Project Title</label><br>\n    <input type="text" id="projectTitle" name="projectTitle" placeholder="Enter title of project here."><br>\n    <label for="projectDescription">Description</label><br>\n    <textarea type="text" id="projectDescription" name="projectDescription" rows="12" cols="38" placeholder="Enter description of project here."></textarea>\n    <input class="submit-button" type="button" value="Submit">';const r=document.createElement("button");r.className="close-icon",r.addEventListener("click",(()=>{l.remove(),r.parentElement.remove()})),t.appendChild(r),t.appendChild(i),i.querySelectorAll(".submit-button")[0].addEventListener("click",(()=>{let t=i.querySelectorAll("#projectTitle")[0].value,o=i.querySelectorAll("#projectDescription")[0].value;if(function(t){for(let o=0;o<e.length;o++)if(t==e[o].title)return!0;return!1}(t))alert("A project with the same title already exists! Please choose a different title.");else{const l=new n(t,o);e.push(l),c(),console.log(e),console.log("-----end of log-----"),u(l),r.click()}})),o.appendChild(l),o.appendChild(t)}()}))})();